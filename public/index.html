<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tarajim for Kids</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Quicksand:wght@400;600;700&display=swap"
    rel="stylesheet">
  <style>
    :root {
      --primary-color: #2C5F2D;
      /* Islamic green */
      --secondary-color: #97B270;
      /* Soft sage */
      --accent-color: #FFB067;
      /* Warm orange */
      --background-color: #FFF9E9;
      /* Soft cream */
      --text-color: #234638;
      /* Deep green-gray */
      --header-bg: #1F4037;
      /* Dark green */
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background-color: var(--background-color);
      color: var(--text-color);
      line-height: 1.8;
      font-family: 'Quicksand', sans-serif;
      background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCI+CiAgPHBhdGggZD0iTTI1LDAgTDUwLDI1IEwyNSw1MCBMMCwyNSBaIiBmaWxsPSJub25lIiBzdHJva2U9IiMyQzVGMkQiIHN0cm9rZS13aWR0aD0iMC41IiBvcGFjaXR5PSIwLjEiLz4KPC9zdmc+');
    }

    body[dir="rtl"] {
      font-family: 'Amiri', serif;
      direction: rtl;
      text-align: right;
    }

    body[dir="ltr"] {
      direction: ltr;
      text-align: left;
    }

    header {
      background-color: var(--header-bg);
      background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCI+CiAgPHBhdGggZD0iTTEyLjUsMCBMMzcuNSwyNSBMMTIuNSw1MCBNMzcuNSwwIEw2Mi41LDI1IE0tMTIuNSwwIEwxMi41LDI1IiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMC41IiBzdHJva2Utb3BhY2l0eT0iMC4xIiBmaWxsPSJub25lIi8+Cjwvc3ZnPg==');
      color: white;
      text-align: center;
      padding: 40px 20px;
      border-bottom: 5px solid var(--accent-color);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      position: relative;
    }

    header h1 {
      font-size: 3.5rem;
      font-weight: 700;
      margin-bottom: 15px;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
    }

    header p {
      font-size: 1.6rem;
      opacity: 0.9;
    }

    .language-toggle {
      position: absolute;
      top: 20px;
      right: 20px;
      background-color: var(--accent-color);
      color: var(--header-bg);
      border: none;
      padding: 12px 20px;
      font-size: 1.1rem;
      font-weight: 600;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }

    body[dir="rtl"] .language-toggle {
      right: auto;
      left: 20px;
    }

    .language-toggle:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    nav {
      background-color: var(--primary-color);
      padding: 15px 0;
      display: flex;
      justify-content: center;
      gap: 20px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    nav a {
      text-decoration: none;
      color: white;
      font-weight: 600;
      font-size: 1.2rem;
      padding: 10px 25px;
      border-radius: 25px;
      transition: all 0.3s ease;
      background-color: rgba(255, 255, 255, 0.1);
    }

    nav a.active {
      background-color: var(--accent-color);
      transform: translateY(-2px);
    }

    nav a:hover {
      background-color: var(--accent-color);
      transform: translateY(-2px);
    }

    .container {
      max-width: 1200px;
      margin: 40px auto;
      padding: 0 30px;
    }

    h2 {
      color: var(--primary-color);
      font-size: 2.5rem;
      margin: 30px 0;
      text-align: center;
      position: relative;
      padding-bottom: 15px;
    }

    h2::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 3px;
      background-color: var(--accent-color);
      border-radius: 2px;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 30px;
      padding: 20px 0;
    }

    .card {
      background: white;
      border-radius: 15px;
      padding: 30px;
      text-align: center;
      position: relative;
      transition: all 0.3s ease;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      overflow: hidden;
      display: block;
      transition: all 0.3s ease, display 0s;
    }

    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: linear-gradient(90deg, var(--primary-color), var(--accent-color));
    }

    .card:hover {
      transform: translateY(-10px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }

    .card .icon {
      width: 60px;
      height: 60px;
      background-color: var(--accent-color);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
      font-weight: bold;
      margin: 0 auto 20px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .card a {
      text-decoration: none;
      color: inherit;
    }

    .card h3 {
      color: var(--primary-color);
      font-size: 1.8rem;
      margin-bottom: 15px;
    }

    .card p {
      color: var(--text-color);
      font-size: 1.1rem;
      line-height: 1.6;
    }

    footer {
      background-color: var(--header-bg);
      color: white;
      text-align: center;
      padding: 20px 0;
      margin-top: 50px;
      border-top: 5px solid var(--accent-color);
    }

    @media (max-width: 768px) {
      header h1 {
        font-size: 2.5rem;
      }

      header p {
        font-size: 1.2rem;
      }

      nav {
        flex-direction: column;
        align-items: center;
        padding: 10px;
      }

      nav a {
        width: 100%;
        text-align: center;
      }

      .grid {
        grid-template-columns: 1fr;
      }

      .container {
        padding: 0 20px;
      }
    }
  </style>
</head>

<body dir="ltr">
  <header>
    <h1 id="title">Tarajim for Kids</h1>
    <p id="subtitle">Explore the lives of the Sahabah in a fun and colorful way!</p>
    <button class="language-toggle" onclick="toggleLanguage()">ÿπÿ±ÿ®Ÿä / EN</button>
  </header>
  <nav>
    <a href="javascript:void(0)" id="nav-caliphs" onclick="filterCards('caliphs')">Caliphs</a>
    <a href="javascript:void(0)" id="nav-bravery" onclick="filterCards('bravery')">Bravery</a>
    <a href="javascript:void(0)" id="nav-kindness" onclick="filterCards('kindness')">Kindness</a>
    <a href="javascript:void(0)" id="nav-loyalty" onclick="filterCards('loyalty')">Loyalty</a>
    <a href="/public/islamic-contributions.html" id="nav-contributions">Islamic Legacy</a>
    <a href="javascript:void(0)" id="nav-all" onclick="filterCards('all')">All</a>
  </nav>
  <div class="container">
    <h2 id="section-title">Stories of the Caliphs</h2>
    <div class="divider"></div>
    <div class="grid" id="sahabaGrid">
      <!-- Dynamic content will be loaded here -->
    </div>
  </div>
  <footer>
    <p>¬© 2025 Tarajim for Kids | All Rights Reserved</p>
  </footer>

  <script>
    const content = {
      en: {
        title: "Tarajim for Kids",
        subtitle: "Explore the lives of the Sahabah in a fun and colorful way!",
        nav: { caliphs: "Caliphs", bravery: "Bravery", kindness: "Kindness", loyalty: "Loyalty", contributions: "Islamic Legacy" },
        sectionTitle: "Stories of the Sahabah",
        abuBakr: { title: "Abu Bakr As-Siddiq (ÿ£ÿ®Ÿà ÿ®ŸÉÿ± ÿßŸÑÿµÿØŸäŸÇ)", desc: "Abu Bakr was the first Caliph and closest companion of the Prophet. He supported the Prophet during the Hijrah and united the Muslim community." },
        umar: { title: "Umar ibn Al-Khattab (ÿπŸÖÿ± ÿ®ŸÜ ÿßŸÑÿÆÿ∑ÿßÿ®)", desc: "Umar was the second Caliph, known for his justice and strength. He expanded the Islamic empire and protected the weak." },
        uthman: { title: "Uthman ibn Affan (ÿπÿ´ŸÖÿßŸÜ ÿ®ŸÜ ÿπŸÅÿßŸÜ)", desc: "Uthman, the third Caliph, was known for his generosity and modesty. He preserved the Quran by compiling it into one standardized version." },
        ali: { title: "Ali ibn Abi Talib (ÿπŸÑŸä ÿ®ŸÜ ÿ£ÿ®Ÿä ÿ∑ÿßŸÑÿ®)", desc: "Ali, the fourth Caliph, was known for his bravery and wisdom. He was a close family member of the Prophet and a just leader." },
        khalid: { title: "Khalid ibn Al-Walid (ÿÆÿßŸÑÿØ ÿ®ŸÜ ÿßŸÑŸàŸÑŸäÿØ)", desc: "Known as the 'Sword of Allah', Khalid was an exceptional military commander who never lost a battle. His strategic genius helped spread Islam." },
        bilal: { title: "Bilal ibn Rabah (ÿ®ŸÑÿßŸÑ ÿ®ŸÜ ÿ±ÿ®ÿßÿ≠)", desc: "The first muezzin in Islam, Bilal was known for his beautiful voice and unwavering faith despite persecution. He was freed by Abu Bakr." },
        salman: { title: "Salman Al-Farisi (ÿ≥ŸÑŸÖÿßŸÜ ÿßŸÑŸÅÿßÿ±ÿ≥Ÿä)", desc: "A Persian companion who traveled far in search of truth. His suggestion of digging a trench helped Muslims defend Medina." },
        saad: { title: "Sa'ad ibn Abi Waqqas (ÿ≥ÿπÿØ ÿ®ŸÜ ÿ£ÿ®Ÿä ŸàŸÇÿßÿµ)", desc: "A skilled archer and military commander who led the conquest of Persia. He was among the first to accept Islam and one of the ten promised Paradise." },
        zaid: { title: "Zaid ibn Thabit (ÿ≤ŸäÿØ ÿ®ŸÜ ÿ´ÿßÿ®ÿ™)", desc: "The chief scribe of the Prophet and compiler of the Quran. His intelligence and dedication helped preserve the divine message for future generations." },
        abuUbaidah: { title: "Abu Ubaidah ibn Al-Jarrah (ÿ£ÿ®Ÿà ÿπÿ®ŸäÿØÿ© ÿ®ŸÜ ÿßŸÑÿ¨ÿ±ÿßÿ≠)", desc: "Known as the Trustworthy One of the Ummah, he led the conquest of Syria and was one of the ten companions promised Paradise." },
        abuDhar: { title: "Abu Dhar Al-Ghifari (ÿ£ÿ®Ÿà ÿ∞ÿ± ÿßŸÑÿ∫ŸÅÿßÿ±Ÿä)", desc: "Known for his strict honesty and speaking truth to power, Abu Dhar was described by the Prophet as the most truthful person under the sky." }
      },
      ar: {
        title: "ÿ™ÿ±ÿßÿ¨ŸÖ ŸÑŸÑÿ£ÿ∑ŸÅÿßŸÑ",
        subtitle: "ÿ™ÿπÿ±ŸÅ ÿπŸÑŸâ ÿ≠Ÿäÿßÿ© ÿßŸÑÿµÿ≠ÿßÿ®ÿ© ÿ®ÿ∑ÿ±ŸäŸÇÿ© ŸÖŸÖÿ™ÿπÿ© ŸàŸÖŸÑŸàŸÜÿ©!",
        nav: { caliphs: "ÿßŸÑÿÆŸÑŸÅÿßÿ°", bravery: "ÿßŸÑÿ¥ÿ¨ÿßÿπÿ©", kindness: "ÿßŸÑÿ∑Ÿäÿ®ÿ©", loyalty: "ÿßŸÑŸàŸÅÿßÿ°", contributions: "ÿßŸÑÿ•ÿ±ÿ´ ÿßŸÑÿ•ÿ≥ŸÑÿßŸÖŸä" },
        sectionTitle: "ŸÇÿµÿµ ÿßŸÑÿµÿ≠ÿßÿ®ÿ©",
        abuBakr: { title: "ÿ£ÿ®Ÿà ÿ®ŸÉÿ± ÿßŸÑÿµÿØŸäŸÇ (Abu Bakr As-Siddiq)", desc: "ŸÉÿßŸÜ ÿ£ÿ®Ÿà ÿ®ŸÉÿ± ÿ£ŸàŸÑ ÿÆŸÑŸäŸÅÿ© Ÿàÿ£ŸÇÿ±ÿ® ÿµÿ≠ÿßÿ®Ÿä ŸÑŸÑŸÜÿ®Ÿä. ÿØÿπŸÖ ÿßŸÑŸÜÿ®Ÿä ÿ£ÿ´ŸÜÿßÿ° ÿßŸÑŸáÿ¨ÿ±ÿ© ŸàŸàÿ≠ÿØ ÿßŸÑÿ£ŸÖÿ© ÿßŸÑÿ•ÿ≥ŸÑÿßŸÖŸäÿ©." },
        umar: { title: "ÿπŸÖÿ± ÿ®ŸÜ ÿßŸÑÿÆÿ∑ÿßÿ® (Umar ibn Al-Khattab)", desc: "ŸÉÿßŸÜ ÿπŸÖÿ± ÿßŸÑÿÆŸÑŸäŸÅÿ© ÿßŸÑÿ´ÿßŸÜŸäÿå ÿßÿ¥ÿ™Ÿáÿ± ÿ®ÿßŸÑÿπÿØŸÑ ŸàÿßŸÑŸÇŸàÿ©. Ÿàÿ≥Ÿëÿπ ÿßŸÑÿ•ŸÖÿ®ÿ±ÿßÿ∑Ÿàÿ±Ÿäÿ© ÿßŸÑÿ•ÿ≥ŸÑÿßŸÖŸäÿ© Ÿàÿ≠ŸÖŸâ ÿßŸÑÿ∂ÿπŸÅÿßÿ°." },
        uthman: { title: "ÿπÿ´ŸÖÿßŸÜ ÿ®ŸÜ ÿπŸÅÿßŸÜ (Uthman ibn Affan)", desc: "ŸÉÿßŸÜ ÿπÿ´ŸÖÿßŸÜÿå ÿßŸÑÿÆŸÑŸäŸÅÿ© ÿßŸÑÿ´ÿßŸÑÿ´ÿå ŸÖÿπÿ±ŸàŸÅŸãÿß ÿ®ŸÉÿ±ŸÖŸá Ÿàÿ™Ÿàÿßÿ∂ÿπŸá. ÿ≠ŸÅÿ∏ ÿßŸÑŸÇÿ±ÿ¢ŸÜ ÿ®ÿ™Ÿàÿ≠ŸäÿØŸá ŸÅŸä ŸÜÿ≥ÿÆÿ© Ÿàÿßÿ≠ÿØÿ©." },
        ali: { title: "ÿπŸÑŸä ÿ®ŸÜ ÿ£ÿ®Ÿä ÿ∑ÿßŸÑÿ® (Ali ibn Abi Talib)", desc: "ŸÉÿßŸÜ ÿπŸÑŸäÿå ÿßŸÑÿÆŸÑŸäŸÅÿ© ÿßŸÑÿ±ÿßÿ®ÿπÿå ŸÖÿπÿ±ŸàŸÅŸãÿß ÿ®ÿ¥ÿ¨ÿßÿπÿ™Ÿá Ÿàÿ≠ŸÉŸÖÿ™Ÿá. ŸÉÿßŸÜ ŸÇÿ±Ÿäÿ®Ÿãÿß ŸÖŸÜ ÿßŸÑŸÜÿ®Ÿä ŸàŸÇÿßÿ¶ÿØŸãÿß ÿπÿßÿØŸÑŸãÿß." },
        khalid: { title: "ÿÆÿßŸÑÿØ ÿ®ŸÜ ÿßŸÑŸàŸÑŸäÿØ (Khalid ibn Al-Walid)", desc: "ÿßŸÑŸÖÿπÿ±ŸàŸÅ ÿ®ÿ≥ŸäŸÅ ÿßŸÑŸÑŸá ÿßŸÑŸÖÿ≥ŸÑŸàŸÑÿå ŸÉÿßŸÜ ÿÆÿßŸÑÿØ ŸÇÿßÿ¶ÿØÿßŸã ÿπÿ≥ŸÉÿ±ŸäŸã ÿßÿ≥ÿ™ÿ´ŸÜÿßÿ¶ŸäŸã ŸÑŸÖ ŸäÿÆÿ≥ÿ± ŸÖÿπÿ±ŸÉÿ© ŸÇÿ∑. ÿ≥ÿßÿπÿØÿ™ ÿπÿ®ŸÇÿ±Ÿäÿ™Ÿá ÿßŸÑÿπÿ≥ŸÉÿ±Ÿäÿ© ŸÅŸä ŸÜÿ¥ÿ± ÿßŸÑÿ•ÿ≥ŸÑÿßŸÖ." },
        bilal: { title: "ÿ®ŸÑÿßŸÑ ÿ®ŸÜ ÿ±ÿ®ÿßÿ≠ (Bilal ibn Rabah)", desc: "ÿ£ŸàŸÑ ŸÖÿ§ÿ∞ŸÜ ŸÅŸä ÿßŸÑÿ•ÿ≥ŸÑÿßŸÖÿå ÿπŸèÿ±ŸÅ ÿ®ŸÑÿßŸÑ ÿ®ÿµŸàÿ™Ÿá ÿßŸÑÿ¨ŸÖŸäŸÑ Ÿàÿ•ŸäŸÖÿßŸÜŸá ÿßŸÑÿ´ÿßÿ®ÿ™ ÿ±ÿ∫ŸÖ ÿßŸÑÿßÿ∂ÿ∑ŸáÿßÿØ. ÿ≠ÿ±ÿ±Ÿá ÿ£ÿ®Ÿà ÿ®ŸÉÿ±." },
        salman: { title: "ÿ≥ŸÑŸÖÿßŸÜ ÿßŸÑŸÅÿßÿ±ÿ≥Ÿä (Salman Al-Farisi)", desc: "ÿµÿ≠ÿßÿ®Ÿä ŸÅÿßÿ±ÿ≥Ÿä ÿ≥ÿßŸÅÿ± ÿ®ÿπŸäÿØŸãÿß ÿ®ÿ≠ÿ´Ÿãÿß ÿπŸÜ ÿßŸÑÿ≠ŸÇŸäŸÇÿ©. ÿ≥ÿßÿπÿØ ÿßŸÇÿ™ÿ±ÿßÿ≠Ÿá ÿ®ÿ≠ŸÅÿ± ÿßŸÑÿÆŸÜÿØŸÇ ÿßŸÑŸÖÿ≥ŸÑŸÖŸäŸÜ ŸÅŸä ÿßŸÑÿØŸÅÿßÿπ ÿπŸÜ ÿßŸÑŸÖÿØŸäŸÜÿ©." },
        saad: { title: "ÿ≥ÿπÿØ ÿ®ŸÜ ÿ£ÿ®Ÿä ŸàŸÇÿßÿµ (Sa'ad ibn Abi Waqqas)", desc: "ÿ±ÿßŸÖŸç ŸÖÿßŸáÿ± ŸàŸÇÿßÿ¶ÿØ ÿπÿ≥ŸÉÿ±Ÿä ŸÇÿßÿØ ŸÅÿ™ÿ≠ ŸÅÿßÿ±ÿ≥. ŸÉÿßŸÜ ŸÖŸÜ ÿ£Ÿàÿßÿ¶ŸÑ ŸÖŸÜ ÿ£ÿ≥ŸÑŸÖŸàÿß Ÿàÿ£ÿ≠ÿØ ÿßŸÑÿπÿ¥ÿ±ÿ© ÿßŸÑŸÖÿ®ÿ¥ÿ±ŸäŸÜ ÿ®ÿßŸÑÿ¨ŸÜÿ©." },
        zaid: { title: "ÿ≤ŸäÿØ ÿ®ŸÜ ÿ´ÿßÿ®ÿ™ (Zaid ibn Thabit)", desc: "ŸÉÿßÿ™ÿ® ÿßŸÑŸàÿ≠Ÿä ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿä Ÿàÿ¨ÿßŸÖÿπ ÿßŸÑŸÇÿ±ÿ¢ŸÜ. ÿ≥ÿßÿπÿØ ÿ∞ŸÉÿßÿ§Ÿá Ÿàÿ™ŸÅÿßŸÜŸäŸá ŸÅŸä ÿ≠ŸÅÿ∏ ÿßŸÑÿ±ÿ≥ÿßŸÑÿ© ÿßŸÑÿ•ŸÑŸáŸäÿ© ŸÑŸÑÿ£ÿ¨ŸäÿßŸÑ ÿßŸÑŸÇÿßÿØŸÖÿ©." },
        abuUbaidah: { title: "ÿ£ÿ®Ÿà ÿπÿ®ŸäÿØÿ© ÿ®ŸÜ ÿßŸÑÿ¨ÿ±ÿßÿ≠ (Abu Ubaidah ibn Al-Jarrah)", desc: "ÿ±ŸÅ ÿ®ÿ£ŸÖŸäŸÜ Ÿáÿ∞Ÿá ÿßŸÑÿ£ŸÖÿ©ÿå ŸÇÿßÿØ ŸÅÿ™ÿ≠ ÿßŸÑÿ¥ÿßŸÖ ŸàŸÉÿßŸÜ ÿ£ÿ≠ÿØ ÿßŸÑÿπÿ¥ÿ±ÿ© ÿßŸÑŸÖÿ®ÿ¥ÿ±ŸäŸÜ ÿ®ÿßŸÑÿ¨ŸÜÿ©." },
        abuDhar: { title: "ÿ£ÿ®Ÿà ÿ∞ÿ± ÿßŸÑÿ∫ŸÅÿßÿ±Ÿä (Abu Dhar Al-Ghifari)", desc: "ÿ±ŸÅ ÿ®ÿµÿØŸÇŸá ÿßŸÑÿ¥ÿØŸäÿØ ŸàŸÇŸàŸÑ ÿßŸÑÿ≠ŸÇ ŸÑŸÑÿ≥ŸÑÿ∑ÿ©ÿå ŸàÿµŸÅŸá ÿßŸÑŸÜÿ®Ÿä ÿ®ÿ£ŸÜŸá ÿ£ÿµÿØŸÇ ŸÑŸáÿ¨ÿ© ÿ™ÿ≠ÿ™ ÿßŸÑÿ≥ŸÖÿßÿ°." }
      }
    };

    // State
    let currentLang = localStorage.getItem('lang') || 'en';
    let currentCategory = 'all';

    function initLanguage() {
      // Set initial state without toggling
      document.documentElement.lang = currentLang;
      document.body.dir = currentLang === "ar" ? "rtl" : "ltr";
      // Update toggle button text if needed, though mostly icons/dynamic
      updateContent(currentLang);
    }

    function toggleLanguage() {
      currentLang = currentLang === "en" ? "ar" : "en";
      localStorage.setItem('lang', currentLang);

      document.documentElement.lang = currentLang;
      document.body.dir = currentLang === "ar" ? "rtl" : "ltr";
      updateContent(currentLang);

      // Re-render cards with new language
      if (sahabaData.length > 0) {
        displaySahaba(sahabaData);
        filterCards(currentCategory);
      }
    }

    function filterCards(category) {
      currentCategory = category;
      const cards = document.querySelectorAll('.card');
      const navLinks = document.querySelectorAll('nav a');

      // Update active nav link
      navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.id === `nav-${category}`) {
          link.classList.add('active');
        }
      });

      // Show/hide cards based on category
      cards.forEach(card => {
        if (category === 'all') {
          card.style.display = 'block';
          return;
        }

        const categories = card.dataset.categories.split(',');
        if (categories.includes(category)) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    }

    function updateContent(lang) {
      const langContent = content[lang];
      document.getElementById("title").textContent = langContent.title;
      document.getElementById("subtitle").textContent = langContent.subtitle;
      document.getElementById("nav-caliphs").textContent = langContent.nav.caliphs;
      document.getElementById("nav-bravery").textContent = langContent.nav.bravery;
      document.getElementById("nav-kindness").textContent = langContent.nav.kindness;
      document.getElementById("nav-loyalty").textContent = langContent.nav.loyalty;
      document.getElementById("nav-contributions").textContent = langContent.nav.contributions;
      document.getElementById("section-title").textContent = langContent.sectionTitle;

      // Update donation section
      const donationH2 = document.querySelector('.donation-section h2');
      if (donationH2) donationH2.textContent = donationH2.getAttribute(`data-${lang}`);

      const donationP = document.querySelector('.donation-content > p');
      if (donationP) donationP.textContent = donationP.getAttribute(`data-${lang}`);

      const donationNote = document.querySelector('.donation-note');
      if (donationNote) donationNote.textContent = donationNote.getAttribute(`data-${lang}`);

      document.querySelectorAll('.donation-btn span[data-en]').forEach(span => {
        span.textContent = span.getAttribute(`data-${lang}`);
      });

      // Update dynamically loaded cards
      // We need to re-render or update existing cards
      // Ideally re-render or update text in place. 
      // Re-rendering is easier if we have the data.
      // But displaySahaba takes 'sahaba' data. We don't have it globally stored in a variable in this scope yet.
      // Let's store fetched data globally.
    }

    // Global data storage
    let sahabaData = [];

    async function loadSahaba() {
      try {
        const response = await fetch('/api/sahaba/public');
        if (!response.ok) {
          throw new Error('Failed to load data');
        }
        sahabaData = await response.json();
        displaySahaba(sahabaData);
        filterCards('all');
      } catch (error) {
        console.error('Error loading Sahaba:', error);
        document.getElementById('sahabaGrid').innerHTML = '<p>Unable to load content. Please try again later.</p>';
      }
    }

    // Load Sahaba data when page loads
    document.addEventListener('DOMContentLoaded', function () {
      initLanguage(); // Apply saved language immediately
      loadSahaba();
    });

    function displaySahaba(sahaba) {
      const container = document.getElementById('sahabaGrid');
      if (!container) return;

      const isAr = currentLang === 'ar';

      const html = sahaba.map(sahabi => `
        <div class="card" data-categories="${sahabi.categories ? sahabi.categories.join(',') : ''}">
          <div class="icon">${sahabi.icon || '#'}</div>
          <a href="profile.html?slug=${sahabi.slug}">
            <h3>${isAr ? sahabi.nameArabic : sahabi.name + ' (' + sahabi.nameArabic + ')'}</h3>
            <p>${isAr ? (sahabi.descriptionArabic || sahabi.description) : sahabi.description}</p>
          </a>
        </div>
      `).join('');

      container.innerHTML = html;
    }
  </script>

  <!-- Donation Section -->
  <section class="donation-section">
    <div class="container">
      <h2 data-en="Support This Project" data-ar="ÿßÿØÿπŸÖ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ¥ÿ±Ÿàÿπ">Support This Project</h2>
      <div class="donation-content">
        <p data-en="Help us keep this educational content free for all children around the world. Your support helps us create more stories and improve the platform."
          data-ar="ÿ≥ÿßÿπÿØŸÜÿß ŸÅŸä ÿßŸÑÿ≠ŸÅÿßÿ∏ ÿπŸÑŸâ Ÿáÿ∞ÿß ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ ÿßŸÑÿ™ÿπŸÑŸäŸÖŸä ŸÖÿ¨ÿßŸÜŸãÿß ŸÑÿ¨ŸÖŸäÿπ ÿßŸÑÿ£ÿ∑ŸÅÿßŸÑ ÿ≠ŸàŸÑ ÿßŸÑÿπÿßŸÑŸÖ. ÿØÿπŸÖŸÉŸÖ Ÿäÿ≥ÿßÿπÿØŸÜÿß ŸÅŸä ÿ•ŸÜÿ¥ÿßÿ° ÿßŸÑŸÖÿ≤ŸäÿØ ŸÖŸÜ ÿßŸÑŸÇÿµÿµ Ÿàÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑŸÖŸÜÿµÿ©.">
          Help us keep this educational content free for all children around the world. Your support helps us create
          more stories and improve the platform.
        </p>
        <div class="donation-buttons">
          <a href="https://www.buymeacoffee.com/tarajimforkids" target="_blank" class="donation-btn coffee-btn">
            <span class="btn-icon">‚òï</span>
            <span data-en="Buy me a coffee" data-ar="ÿßÿ¥ÿ™ÿ±Ÿä ŸÑŸä ŸÇŸáŸàÿ©">Buy me a coffee</span>
          </a>
          <a href="https://ko-fi.com/tarajimforkids" target="_blank" class="donation-btn kofi-btn">
            <span class="btn-icon">üíù</span>
            <span data-en="Support on Ko-fi" data-ar="ÿßÿØÿπŸÖ ÿπŸÑŸâ Ko-fi">Support on Ko-fi</span>
          </a>
          <a href="https://paypal.me/tarajimforkids" target="_blank" class="donation-btn paypal-btn">
            <span class="btn-icon">üí≥</span>
            <span data-en="Donate via PayPal" data-ar="ÿ™ÿ®ÿ±ÿπ ÿπÿ®ÿ± PayPal">Donate via PayPal</span>
          </a>
        </div>
        <p class="donation-note" data-en="Every contribution, no matter how small, makes a difference!"
          data-ar="ŸÉŸÑ ŸÖÿ≥ÿßŸáŸÖÿ©ÿå ŸÖŸáŸÖÿß ŸÉÿßŸÜÿ™ ÿµÿ∫Ÿäÿ±ÿ©ÿå ÿ™ÿ≠ÿØÿ´ ŸÅÿ±ŸÇŸãÿß!">
          Every contribution, no matter how small, makes a difference!
        </p>
      </div>
    </div>
  </section>

  <style>
    .donation-section {
      display: none;
      /* Hidden - can be re-enabled by removing this line */
      background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
      color: white;
      padding: 60px 0;
      margin-top: 60px;
      text-align: center;
    }

    .donation-section h2 {
      color: white;
      margin-bottom: 20px;
    }

    .donation-section h2::after {
      background-color: var(--accent-color);
    }

    .donation-content p {
      font-size: 1.2rem;
      margin-bottom: 30px;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      opacity: 0.9;
    }

    .donation-buttons {
      display: flex;
      gap: 20px;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 30px;
    }

    .donation-btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 15px 30px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: 600;
      font-size: 1.1rem;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    .coffee-btn {
      background: #FFDD00;
      color: #333;
    }

    .kofi-btn {
      background: #FF5E5B;
      color: white;
    }

    .paypal-btn {
      background: #0070BA;
      color: white;
    }

    .donation-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    }

    .btn-icon {
      font-size: 1.3rem;
    }

    .donation-note {
      font-style: italic;
      opacity: 0.8;
      font-size: 1rem;
    }

    @media (max-width: 768px) {
      .donation-buttons {
        flex-direction: column;
        align-items: center;
      }

      .donation-btn {
        width: 250px;
        justify-content: center;
      }
    }
  </style>

</body>

</html>.